Наиболее важные параметры
Важные: 
Использование оперативной памятью.

В буфер в оперативной памяти кешируются часто используемые данные, 
обращение к ним намного быстрее, чем обращение к накопителям HDD.

shared_buffers задает размер буфера.

Настройку можно начинать с 25 % от общего объема ОЗУ сервера. 
!! Изменение этого параметра вступает в силу только после перезагрузки сервера !!


effective_cache_size - 
	указывает на какой общий размер кеша рассчитывать, 
	включая кеш операционной системы. 

Чем выше это значение, тем большее предпочтение отдается индексам. 
Начать можно с 50–75 % от объема ОЗУ.

work_mem - 
	определяет объем памяти, выделяемый для выполнения операций 
	сортировки, построения хеш-таблиц при выполнении соединения.

Признаком того, что памяти недостаточно, 
является активное использование временных файлов и, 
уменьшение производительности в результате. 

Значение по умолчанию 4 МБ в большинстве случаев стоит увеличить как минимум в несколько раз, 
не выходя за общий размер оперативной памяти сервера.


maintenance_work_mem - 
	определяет размер памяти, выделяемый служебным процессам. 

Его увеличение может ускорить построение индексов и работу процесса очистки (vacuum). 
Обычно устанавливается значение, в несколько раз превышающее значение work_mem.
Например, при ОЗУ 32 ГБ можно начать с настройки:
	shared_buffers = '8GB'
	effective_cache_size = '24GB'
	work_mem = '128MB'
	maintenance_work_mem = '512MB'

Отношение значений двух параметров 
random_page_cost и 
seq_page_cost 
	должно соответствовать отношению скоростей произвольного и последовательного доступа к диску.
	(Никогда не изменяйте значение seq_page_cost, равное 1.)

По умолчанию предполагается, что произвольный доступ в 4 раза медленнее последовательного, при использовании HDD.
Для дисковых массивов и SSD-дисков значение random_page_cost надо уменьшить, например
random_page_cost = 1.2 для SSD
	

Автоочистка (autovacuum). 
Этот процесс занимается «сборкой мусора» и выполняет ряд других важных для системы задач. 
Его настройка существенно зависит от конкретного приложения
и нагрузки, которую оно создает.

В большинстве случаев можно начать со следующего:

autovacuum_vacuum_scale_factor - уменьшить значение до 0.01, 
	чтобы очистка выполнялась чаще и меньшими порциями;

autovacuum_vacuum_cost_limit - увеличить значение в 10 раз,
либо уменьшить autovacuum_vacuum_cost_delay в 10 раз,
	чтобы очистка выполнялась быстрее (для версий до 12).

 

Настройка процессов, связанных с обслуживанием 
буферного кеша и 
журнала предзаписи, 
Настройк зависит от конкретного приложения. 
Начните с установки
checkpoint_completion_target = 0.9 
	чтобы сгладить нагрузку, 

checkpoint_timeout - увеличения с 5 минут до 30,
	 чтобы уменьшить накладные расходы на выполнение контрольных точек и
	пропорционально увеличить
max_wal_size - 
	с той же целью.

